<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Sinya Loyalty Dashboard (Enhanced)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --primary:#0ea5e9;
      --secondary:#64748b;
      --danger:#ef4444;
      --bg:#f8fafc;
      --card:#ffffff;
      --border:#e5e7eb;
      --text:#111827;
      --muted:#64748b;
      --ok:#10b981;
      --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text);margin:24px;line-height:1.5}
    h1{font-size:22px;margin:0 0 16px}
    h2{font-size:18px;margin:24px 0 12px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
    label{display:flex;flex-direction:column;font-size:12px;color:#374151}
    input,select,button{padding:10px;border:1px solid var(--border);border-radius:10px;font-size:14px;background:#fff}
    button{cursor:pointer;background:var(--primary);color:#fff;border:none}
    button.secondary{background:var(--secondary)}
    button.danger{background:var(--danger)}
    button.ghost{background:#fff;color:#111;border:1px solid var(--border)}
    table{width:100%;border-collapse:collapse;margin-top:8px;background:var(--card)}
    th,td{border:1px solid var(--border);padding:8px;font-size:14px;text-align:right}
    th:first-child, td:first-child{text-align:center;width:60px}
    th{background:#f1f5f9;color:#334155}
    .table-wrap{overflow:auto;border:1px solid var(--border);border-radius:12px;padding:8px;background:var(--card)}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
    .outbox{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
    .card{border:1px solid var(--border);border-radius:12px;padding:12px;background:var(--card)}
    .value{font-weight:800;font-size:18px;margin-top:6px}
    .muted{color:var(--muted)}
    .note{font-size:12px;color:#6b7280}
    .badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#eef2ff;color:#3730a3;font-size:12px;margin-left:6px}
    .row-actions{display:flex;gap:6px;justify-content:center}
    .fail{outline:2px solid var(--danger);}
    .ok{outline:2px solid var(--ok);}
    input[type="file"]{padding:8px}
    .section{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px}
  </style>
</head>
<body>
  <h1>Sinya Loyalty Dashboardï¼ˆEnhanced ç‰ˆï¼‰<span class="badge">è¤‡åˆ© uplift / å„²å­˜è¼‰å…¥ / æ¼æ–—ä¼°ç®—</span></h1>

  <div class="section">
    <h2>è¨­å®š</h2>
    <div class="grid">
      <label>å¹£åˆ¥ç¬¦è™Ÿ
        <input id="curr_sym" type="text" placeholder="ä¾‹å¦‚ NT$" />
      </label>
      <label>å°æ•¸ä½æ•¸
        <input id="decimals" type="number" min="0" max="4" placeholder="0 æˆ– 2" />
      </label>
    </div>
    <div class="toolbar">
      <button id="btn_save">ğŸ’¾ å„²å­˜</button>
      <button id="btn_load" class="secondary">â¤“ è¼‰å…¥</button>
      <button id="btn_download" class="ghost">â¬‡ ä¸‹è¼‰è¨­å®š(JSON)</button>
      <label class="ghost" style="display:inline-flex;align-items:center;gap:8px;padding:0 8px;border-radius:10px;border:1px solid var(--border)">
        â¬† ä¸Šå‚³è¨­å®š(JSON)
        <input id="file_upload" type="file" accept="application/json" />
      </label>
      <button id="btn_sample" class="ghost">âœ¨ å¡«å…¥ç¤ºä¾‹æ•¸æ“š</button>
      <button id="btn_check" class="ghost">ğŸ§ª æ’ç­‰å¼æª¢æ¸¬</button>
    </div>
  </div>

  <div class="section">
    <h2>ä¸€ã€åŸºæœ¬åƒæ•¸</h2>
    <div class="grid">
      <label>æ¯›åˆ©ç‡ %ï¼ˆGMï¼‰<input id="gm" type="number" placeholder="ä¾‹å¦‚ 20" /></label>
      <label>ç¾é‡‘å æ¯” %<input id="pcash" type="number" placeholder="ä¾‹å¦‚ 50" /></label>
      <label>åˆ·å¡å æ¯” %<input id="pcard" type="number" placeholder="ä¾‹å¦‚ 50" /></label>
      <label>åˆ·å¡è²»ç‡ %<input id="cardfee" type="number" placeholder="ä¾‹å¦‚ 1.8" /></label>
      <label>å…¶ä»–å›ºå®šè¡ŒéŠ·è²»ï¼ˆå¹´ï¼‰<input id="other_mkt" type="number" placeholder="ä¾‹å¦‚ 300000" /></label>
      <label class="muted">uplift ä½¿ç”¨ã€Œè¤‡åˆ©ç›¸ä¹˜ã€<input id="use_multiplicative" type="checkbox" checked /></label>
    </div>
  </div>

  <div class="section">
    <h2>äºŒã€é‹è²»ï¼ˆå¯é¸ï¼‰</h2>
    <div class="grid">
      <label>é‹é€ä»¶æ•¸<input id="ship_count" type="number" placeholder="0" /></label>
      <label>æ¯ä»¶é‡‘é¡<input id="ship_unit" type="number" placeholder="0" /></label>
    </div>
  </div>

  <div class="section">
    <h2>ä¸‰ã€æœƒå“¡ç­‰ç´šèˆ‡è³¼è²·å›é¥‹</h2>
    <div class="toolbar">
      <button id="btn_add_level">ï¼‹æ–°å¢ç­‰ç´š</button>
    </div>
    <div class="table-wrap">
      <table id="tbl_levels">
        <thead>
          <tr>
            <th>ç­‰ç´š</th>
            <th>äººæ•¸</th>
            <th>å¹´å‡æ¶ˆè²» ASP</th>
            <th>ç¾é‡‘å›é¥‹%</th>
            <th>åˆ·å¡å›é¥‹%</th>
            <th>åˆªé™¤</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="grid" style="margin-top:8px">
      <label>æœƒå“¡äººæ•¸ï¼ˆç¸½ï¼Œé€£å‹•ç­‰ç´šï¼‰
        <input id="members_total_auto" type="number" disabled placeholder="è‡ªå‹•è¨ˆç®—" />
      </label>
    </div>
  </div>

  <div class="section">
    <h2>å››ã€æ´»å‹•è¨­å®šï¼ˆupliftï¼‰</h2>
    <div class="toolbar">
      <button id="btn_add_campaign">ï¼‹æ–°å¢æ´»å‹•</button>
    </div>
    <div class="table-wrap">
      <table id="tbl_campaigns">
        <thead>
          <tr>
            <th>#</th>
            <th>uplift %</th>
            <th>å½±éŸ¿æ”¯ä»˜</th>
            <th>æ´»å‹•æˆæœ¬</th>
            <th>åˆªé™¤</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="section">
    <h2>äº”ã€æ¨è–¦ï¼ˆå‹è–¦ï¼‰</h2>
    <div class="grid">
      <label>é‚€è«‹äººçå‹µï¼ˆå…ƒ/å–®ï¼‰<input id="ref_referrer" type="number" placeholder="ä¾‹å¦‚ 50" /></label>
      <label>è¢«é‚€è«‹äººçå‹µï¼ˆå…ƒ/å–®ï¼‰<input id="ref_invitee" type="number" placeholder="ä¾‹å¦‚ 30" /></label>
      <label style="align-self:end;display:flex;gap:8px;align-items:center">
        <input id="ref_auto" type="checkbox" /> è‡ªå‹•ä¼°ç®—æ¨è–¦è¨‚å–®æ•¸ï¼ˆç”¨æ¼æ–—ï¼‰
      </label>
      <label>æ¨è–¦è¨‚å–®æ•¸ï¼ˆå¹´ï¼‰<input id="ref_orders" type="number" placeholder="æ‰‹å‹•è¼¸å…¥æˆ–å‹¾è‡ªå‹•" /></label>
    </div>
    <div class="grid">
      <label>æ´»èºç‡ %<input id="ref_active_rate" type="number" placeholder="ä¾‹å¦‚ 30" /></label>
      <label>æ¯ä½æ´»èºæœƒå“¡é‚€è«‹æ•¸ï¼ˆæ¬¡/å¹´ï¼‰<input id="ref_invites_per_active" type="number" placeholder="ä¾‹å¦‚ 0.2" /></label>
      <label>å—é‚€æ¥å—ç‡ %<input id="ref_accept_rate" type="number" placeholder="ä¾‹å¦‚ 25" /></label>
      <label>å—é‚€è€…ä¸‹å–®ç‡ %<input id="ref_purchase_conv" type="number" placeholder="ä¾‹å¦‚ 40" /></label>
      <label>æ¯ä½å—é‚€è€…å¹´å‡ä¸‹å–®æ•¸<input id="ref_orders_per_invitee" type="number" placeholder="ä¾‹å¦‚ 1.3" /></label>
    </div>
    <p class="note">å‹¾é¸ã€Œè‡ªå‹•ä¼°ç®—ã€æ™‚ï¼šæ¨è–¦è¨‚å–®æ•¸ = æœƒå“¡ç¸½æ•¸Ã—æ´»èºç‡Ã—æ¯ä½æ´»èºæœƒå“¡é‚€è«‹æ•¸Ã—å—é‚€æ¥å—ç‡Ã—å—é‚€è€…ä¸‹å–®ç‡Ã—æ¯ä½å—é‚€è€…å¹´å‡ä¸‹å–®æ•¸ã€‚</p>
  </div>

  <div class="section">
    <h2>å…­ã€æ“ä½œ</h2>
    <div class="toolbar">
      <button id="btn_calc">ç«‹å³è¨ˆç®—</button>
      <button id="btn_reset" class="secondary">é‡ç½®</button>
    </div>
  </div>

  <div class="section">
    <h2>ä¸ƒã€å¹´åº¦åŒ¯ç¸½</h2>
    <div class="outbox">
      <div class="card"><div class="muted">å¹´ Salesï¼ˆuplift å¾Œåˆè¨ˆï¼‰</div><div id="out_sales" class="value">-</div></div>
      <div class="card"><div class="muted">å¹´ GP</div><div id="out_gp" class="value">-</div></div>
      <div class="card"><div class="muted">å›é¥‹ï¼ˆè³¼è²·ï¼‹å…¶ä»–ï¼‰</div><div id="out_rebates" class="value">-</div></div>
      <div class="card"><div class="muted">åˆ·å¡è²»</div><div id="out_cardfee" class="value">-</div></div>
      <div class="card"><div class="muted">æ´»å‹•æˆæœ¬ï¼ˆåˆè¨ˆï¼‰</div><div id="out_campcost" class="value">-</div></div>
      <div class="card"><div class="muted">å…¶ä»–å›ºå®šè¡ŒéŠ·è²»</div><div id="out_other" class="value">-</div></div>
      <div class="card"><div class="muted">é‹è²»</div><div id="out_ship" class="value">-</div></div>
      <div class="card"><div class="muted">æ·¨æ•ˆç›Šï¼ˆNetï¼‰</div><div id="out_net" class="value">-</div></div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
